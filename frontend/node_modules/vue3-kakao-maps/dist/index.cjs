(function(M,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(M=typeof globalThis<"u"?globalThis:M||self,e(M.Vue3KakaoMaps={},M.Vue))})(this,function(M,e){"use strict";const h=e.ref(!1),O=(u,d)=>{const s=document.createElement("script"),t=d!=null&&d.length>0?`&libraries=${d.join(",")}`:"";s.id="kakao-map-api-script",s.src=`//dapi.kakao.com/v2/maps/sdk.js?appkey=${u}&autoload=false${t}`,document.body.appendChild(s),s.onload=()=>{kakao.maps.load(()=>{h.value=!0})}},B=e.defineComponent({__name:"KakaoMap",props:{width:{default:"40rem"},height:{default:"30rem"},markerList:{},infoWindowList:{},markerCluster:{},lat:{},lng:{},level:{default:3},mapTypeId:{},draggable:{type:Boolean,default:!0},scrollwheel:{type:Boolean,default:!0},disableDoubleClick:{type:Boolean,default:!1},disableDoubleClickZoom:{type:Boolean,default:!1},projectionId:{default:"kakao.maps.ProjectionId.WCONG"},tileAnimation:{type:Boolean,default:!0},keyboardShortcuts:{type:[Boolean,Object]}},emits:["onLoadKakaoMap","onLoadKakaoMapMarkerCluster"],setup(u,{emit:d}){const s=u,t=d,a=e.ref(null),m=e.ref();e.provide("mapRef",m);const i=()=>{const o={center:new kakao.maps.LatLng(s.lat,s.lng),...s};a.value!==null&&(m.value=new window.kakao.maps.Map(a.value,o),t("onLoadKakaoMap",m.value))},g=e.ref(),l=o=>{var k,p;if(o.markers===void 0&&o.customOverlayProps===void 0)throw new Error("클러스터 할 입력값이 없습니다.");if(m.value!==null){if(o.markers!==void 0){const n=e.ref([]);(k=o.markers)==null||k.forEach(c=>{var y;const f=new kakao.maps.Marker({position:new kakao.maps.LatLng(c.lat,c.lng),image:c.image??void 0,title:c.title??void 0,draggable:typeof c.draggable=="boolean"?c.draggable:!1,clickable:typeof c.clickable=="boolean"?c.clickable:!1,zIndex:typeof c.zIndex=="number"?c.zIndex:0,opacity:c.opacity??1,altitude:c.altitude??0,range:c.range??void 0});(y=n.value)==null||y.push(f)}),g.value=new kakao.maps.MarkerClusterer({map:e.toRaw(m.value),...o,markers:n.value})}if(o.customOverlayProps!==void 0){const n=e.ref([]);(p=o.customOverlayProps)==null||p.forEach(c=>{var y;const f=new kakao.maps.CustomOverlay({position:new kakao.maps.LatLng(c.lat,c.lng),content:c.content,xAnchor:c.xAnchor,yAnchor:c.yAnchor,zIndex:c.zIndex,clickable:c.clickable});(y=n.value)==null||y.push(f)}),g.value=new kakao.maps.MarkerClusterer({map:e.toRaw(m.value),...o,markers:n.value})}t("onLoadKakaoMapMarkerCluster",g.value)}};e.onMounted(()=>{h.value&&(i(),s.markerCluster!==void 0&&l(s.markerCluster))}),e.watch(()=>h.value,o=>{o&&(i(),s.markerCluster!==void 0&&l(s.markerCluster))});const r=e.computed(()=>({width:isFinite(+s.width)?s.width+"px":s.width,height:isFinite(+s.height)?s.height+"px":s.height}));return e.watch([()=>s.lat,()=>s.lng],([o,k])=>{var p;(p=m.value)==null||p.panTo(new kakao.maps.LatLng(o,k))}),e.watch(()=>s.draggable,o=>{var k,p;o===void 0||o?(k=m.value)==null||k.setDraggable(!0):(p=m.value)==null||p.setDraggable(!1)}),e.watch(()=>s.level,o=>{var k,p;o===void 0?(k=m.value)==null||k.setLevel(3):(p=m.value)==null||p.setLevel(o)}),e.watch(()=>s.mapTypeId,o=>{var k,p;o===void 0?(k=m.value)==null||k.setMapTypeId(3):(p=m.value)==null||p.setMapTypeId(o)}),e.watch(()=>s.scrollwheel,o=>{var k,p;o===void 0?(k=m.value)==null||k.setZoomable(!0):(p=m.value)==null||p.setZoomable(o)}),e.watch(()=>s.projectionId,o=>{var k,p;o===void 0?(k=m.value)==null||k.setProjectionId(kakao.maps.ProjectionId.WCONG):(p=m.value)==null||p.setProjectionId(o)}),e.watch(()=>s.keyboardShortcuts,o=>{var k,p;o===void 0?(k=m.value)==null||k.setKeyboardShortcuts(!1):typeof o=="boolean"&&((p=m.value)==null||p.setKeyboardShortcuts(o))}),(o,k)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"kakaoMapRef",ref:a,style:e.normalizeStyle(r.value)},[s.markerList&&s.markerCluster===void 0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(s.markerList,(p,n)=>(e.openBlock(),e.createBlock(e.unref(L),{key:p.key===void 0?n:p.key,lat:p.lat,lng:p.lng,"info-window":p==null?void 0:p.infoWindow,draggable:p.draggable,image:p.image,order:p.order,"order-bottom-margin":p.orderBottomMargin},null,8,["lat","lng","info-window","draggable","image","order","order-bottom-margin"]))),128)):e.createCommentVNode("",!0),s.infoWindowList&&s.markerCluster===void 0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(s.infoWindowList,(p,n)=>(e.openBlock(),e.createBlock(e.unref(w),{key:p.key===void 0?n:p.key,lat:p.lat,lng:p.lng,content:p.content,visible:p.visible},null,8,["lat","lng","content","visible"]))),128)):e.createCommentVNode("",!0),e.renderSlot(o.$slots,"default")],4))}}),_={imageSrc:"https://t1.daumcdn.net/mapjsapi/images/2x/marker.png",imageWidth:29,imageHeight:42,imageOption:{}},L=e.defineComponent({__name:"KakaoMapMarker",props:{lat:{},lng:{},infoWindow:{},visible:{type:Boolean},image:{},title:{},draggable:{type:Boolean},clickable:{type:Boolean},zIndex:{},opacity:{},altitude:{},range:{},order:{},orderBottomMargin:{}},emits:["onLoadKakaoMapMarker","onClickKakaoMapMarker","dragEndKakaoMapMarker","mouseOverKakaoMapMarker","mouseOutKakaoMapMarker","deleteKakaoMapMarker"],setup(u,{emit:d}){const s=d,t=u,a=e.ref(),m=e.inject("mapRef"),i=n=>{if(n!=null){if(n.imageSrc===void 0)throw new Error("이미지 경로가 존재하지 않습니다.")}else n=_;const c=new Image;c.src=n.imageSrc;const f=new kakao.maps.MarkerImage(n.imageSrc,new kakao.maps.Size(n.imageWidth??c.width,n.imageHeight??c.height),n.imageOption);a.value!==void 0&&a.value.setImage(f)},g=n=>{if(t.lat===void 0||t.lng===void 0)throw new Error("marker의 위치가 없습니다.");const c=new kakao.maps.LatLng(t.lat,t.lng);a.value=new kakao.maps.Marker({position:c,title:t.title,draggable:t.draggable,clickable:t.clickable,zIndex:t.zIndex,opacity:t.opacity,altitude:t.altitude,range:t.range}),i(t.image),s("onLoadKakaoMapMarker",a.value),a.value.setMap(n),l(a.value),o(a.value),k(a.value),r(n,a.value)},l=n=>{kakao.maps.event.addListener(n,"click",()=>{s("onClickKakaoMapMarker")})},r=(n,c)=>{kakao.maps.event.addListener(c,"dragend",function(f){s("dragEndKakaoMapMarker",c)})},o=n=>{kakao.maps.event.addListener(n,"mouseover",()=>{s("mouseOverKakaoMapMarker")})},k=n=>{kakao.maps.event.addListener(n,"mouseout",()=>{s("mouseOutKakaoMapMarker")})},p=n=>`<div style="position:relative; bottom:${t.orderBottomMargin}">
        ${n}
      </div>`;return e.onBeforeUnmount(()=>{var n;s("deleteKakaoMapMarker",a),(n=a.value)==null||n.setMap(null)}),e.watch([()=>h.value,()=>m,()=>m==null?void 0:m.value],([n,c,f])=>{n&&c!==void 0&&f!==void 0&&g(f)},{immediate:!0}),e.watch([()=>t.lat,()=>t.lng],([n,c])=>{var f;h.value&&((f=a.value)==null||f.setPosition(new kakao.maps.LatLng(n,c)))}),e.watch([()=>t.image],()=>{i(t.image)}),e.watch(()=>t.title,n=>{var c;n!==void 0&&((c=a.value)==null||c.setTitle(n))}),e.watch(()=>t.draggable,n=>{var c;(c=a.value)==null||c.setDraggable(n!==void 0&&n)}),e.watch(()=>t.clickable,n=>{var c;(c=a.value)==null||c.setDraggable(n!==void 0&&n)}),e.watch(()=>t.zIndex,n=>{var c;n!==void 0&&isFinite(n)&&((c=a.value)==null||c.setZIndex(Number(n)))}),e.watch(()=>t.opacity,n=>{var c,f;n!==void 0&&isFinite(n)?(c=a.value)==null||c.setOpacity(Number(n)):(f=a.value)==null||f.setOpacity(1)}),(n,c)=>{var f,y,K;return e.openBlock(),e.createElementBlock("div",null,[n.$slots.infoWindow?(e.openBlock(),e.createBlock(e.unref(w),{key:0,marker:a.value,lat:t.lat,lng:t.lng,visible:(f=t==null?void 0:t.infoWindow)==null?void 0:f.visible},{default:e.withCtx(()=>[e.renderSlot(n.$slots,"infoWindow")]),_:3},8,["marker","lat","lng","visible"])):t.infoWindow?(e.openBlock(),e.createBlock(e.unref(w),{key:1,marker:a.value,lat:t.lat,lng:t.lng,content:(y=t==null?void 0:t.infoWindow)==null?void 0:y.content,visible:(K=t==null?void 0:t.infoWindow)==null?void 0:K.visible},null,8,["marker","lat","lng","content","visible"])):e.createCommentVNode("",!0),t.order?(e.openBlock(),e.createBlock(e.unref(v),{key:2,lat:t.lat,lng:t.lng,"y-anchor":0,content:p(t.order)},null,8,["lat","lng","content"])):e.createCommentVNode("",!0)])}}}),E={key:0},w=e.defineComponent({__name:"KakaoMapInfoWindow",props:{lat:{},lng:{},marker:{},content:{},disableAutoPan:{type:Boolean},removable:{type:Boolean,default:!1},zIndex:{},altitude:{},range:{default:500},visible:{type:Boolean,default:!0}},emits:["onLoadKakaoMapInfoWindow"],setup(u,{emit:d}){const s=d,t=u,a=e.ref(),m=e.ref(),i=e.inject("mapRef"),g=l=>{var o,k;if(t.lat===void 0||t.lng===void 0)throw new Error("infoWindow의 위치가 없습니다.");const r=new kakao.maps.LatLng(t.lat,t.lng);a.value=new kakao.maps.InfoWindow({position:r,content:m.value??t.content??"",removable:t.removable,disableAutoPan:t.disableAutoPan,zIndex:t.zIndex,altitude:t.altitude,range:t.range}),t.visible&&(s("onLoadKakaoMapInfoWindow",a.value),t.marker!==void 0?(o=a==null?void 0:a.value)==null||o.open(l,t.marker):(k=a==null?void 0:a.value)==null||k.open(l))};return e.onBeforeUnmount(()=>{(a==null?void 0:a.value)!==null&&a.value!==void 0&&a.value.close()}),e.watch([()=>h.value,()=>i==null?void 0:i.value,()=>h,()=>i],([l,r])=>{t.visible&&l&&r!==void 0&&r!==null&&g(r)},{immediate:!0}),e.watch(()=>t.marker,l=>{var r,o,k;!t.visible||(i==null?void 0:i.value)===void 0||(a.value!=null&&((r=a.value)==null||r.close()),l!==void 0?(o=a==null?void 0:a.value)==null||o.open(i==null?void 0:i.value,l):(k=a==null?void 0:a.value)==null||k.open(i==null?void 0:i.value))},{immediate:!0}),e.watch([()=>m==null?void 0:m.value,()=>m],([l,r])=>{var o;l!==void 0&&((o=a.value)==null||o.setContent(l))},{deep:!0}),e.watch([()=>t.lat,()=>t.lng],([l,r])=>{var o;(o=a.value)==null||o.setPosition(new kakao.maps.LatLng(l,r))}),e.watch(()=>t.content,l=>{var r;(r=a.value)==null||r.setContent(l??"")}),e.watch(()=>t.zIndex,l=>{var r;(r=a.value)==null||r.setZIndex(l??0)}),e.watch(()=>t.altitude,l=>{var r;(r=a.value)==null||r.setAltitude(l??0)}),e.watch(()=>t.range,l=>{var r;(r=a.value)==null||r.setRange(l??500)}),e.watch(()=>t.visible,l=>{l?h!=null&&h.value&&(i==null?void 0:i.value)!==void 0&&(i==null?void 0:i.value)!==null&&g(i.value):(a==null?void 0:a.value)!==null&&a.value!==void 0&&a.value.close()}),(l,r)=>t.content&&t.content.length>0||l.$slots.default?(e.openBlock(),e.createElementBlock("div",E,[l.$slots.default?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"contentSlot",ref:m},[e.renderSlot(l.$slots,"default")],512)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)}}),I={key:0},v=e.defineComponent({__name:"KakaoMapCustomOverlay",props:{lat:{},lng:{},content:{},xAnchor:{default:.5},yAnchor:{default:.5},zIndex:{},clickable:{type:Boolean,default:!1},visible:{type:Boolean,default:!0}},emits:["onLoadKakaoMapCustomOverlay"],setup(u,{emit:d}){const s=d,t=u,a=e.ref(),m=e.ref(),i=e.inject("mapRef"),g=l=>{if(t.lat===void 0||t.lng===void 0)throw new Error("KakaoMapCustomOverlay의 위치가 없습니다.");const r=new kakao.maps.LatLng(t.lat,t.lng);a.value=new kakao.maps.CustomOverlay({position:r,content:m.value??t.content??"",xAnchor:t.xAnchor,yAnchor:t.yAnchor,zIndex:t.zIndex,clickable:t.clickable}),t.visible&&(a.value.setMap(l),s("onLoadKakaoMapCustomOverlay",a.value))};return e.onBeforeUnmount(()=>{var l;a.value!==null&&((l=a.value)==null||l.setMap(null))}),e.watch([()=>h.value,()=>i==null?void 0:i.value,()=>h,()=>i],([l,r])=>{t.visible&&l&&r!==void 0&&r!==null&&g(r)},{immediate:!0}),e.watch([()=>t.lat,()=>t.lng],([l,r])=>{var o;(o=a.value)==null||o.setPosition(new kakao.maps.LatLng(l,r))}),e.watch(()=>t.content,l=>{var r;(r=a.value)==null||r.setContent(l??"")}),e.watch(()=>t.zIndex,l=>{var r;(r=a.value)==null||r.setZIndex(l??0)}),e.watch(()=>t.visible,l=>{var r;l?h!=null&&h.value&&(i==null?void 0:i.value)!==void 0&&(i==null?void 0:i.value)!==null&&g(i.value):(a==null?void 0:a.value)!==null&&a.value!==void 0&&((r=a.value)==null||r.setMap(null))}),(l,r)=>t.content&&t.content.length>0||l.$slots.default?(e.openBlock(),e.createElementBlock("div",I,[l.$slots.default?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"contentSlot",ref:m},[e.renderSlot(l.$slots,"default")],512)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)}}),b=e.defineComponent({__name:"KakaoMapPolyline",props:{latLngList:{},endArrow:{type:Boolean},strokeWeight:{default:3},strokeColor:{default:"#F10000"},strokeOpacity:{default:.6},strokeStyle:{default:"solid"},zIndex:{}},setup(u){const d=u,s=e.inject("mapRef");let t=null;const a=e.computed(()=>d.latLngList.map(i=>new kakao.maps.LatLng(i.lat,i.lng))),m=i=>{t=new kakao.maps.Polyline({path:a.value,endArrow:d.endArrow,strokeWeight:d.strokeWeight,strokeColor:d.strokeColor,strokeOpacity:d.strokeOpacity,strokeStyle:d.strokeStyle,zIndex:d.zIndex}),t.setMap(i)};return e.watch([()=>h.value,()=>s==null?void 0:s.value,()=>h,()=>s],([i,g])=>{i&&g!==void 0&&g!==null&&m(g)},{immediate:!0}),e.watch(()=>d.latLngList,()=>{t==null||t.setPath(a.value)},{deep:!0}),e.watch(()=>d.endArrow,()=>{t==null||t.setMap(null),s!==void 0&&m(s.value)}),e.watch([()=>d.strokeWeight,()=>d.strokeColor,()=>d.strokeOpacity,()=>d.strokeStyle],([i,g,l,r])=>{t==null||t.setOptions({strokeWeight:i,strokeColor:g,strokeOpacity:l,strokeStyle:r})}),e.watch(()=>d.zIndex,i=>{i!==void 0&&(t==null||t.setZIndex(i))}),e.onBeforeUnmount(()=>{t==null||t.setMap(null)}),(i,g)=>(e.openBlock(),e.createElementBlock("div",null,[e.renderSlot(i.$slots,"default")]))}}),P={key:0},S={key:1},C=e.defineComponent({__name:"KakaoMapMarkerPolyline",props:{markerList:{},endArrow:{type:Boolean},strokeWeight:{},strokeColor:{},strokeOpacity:{},strokeStyle:{},zIndex:{},showMarkerOrder:{type:Boolean}},setup(u){const d=u,s=e.inject("mapRef"),t=e.ref([]),a=l=>{t.value.push(l)},m=l=>{const r=t.value.indexOf(l);t.value.splice(r,1)},i=l=>{const r=d.markerList,o=t.value.indexOf(l);r[o].lat=l.getPosition().getLat(),r[o].lng=l.getPosition().getLng()},g=(l,r)=>`<div style="position:relative; bottom:${r}">
        ${l}
      </div>`;return(l,r)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[d.markerList&&e.unref(s)!==null?(e.openBlock(),e.createElementBlock("div",P,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.markerList,(o,k)=>(e.openBlock(),e.createBlock(e.unref(L),{id:k,key:o.key===void 0?k:o.key,map:e.unref(s),lat:o.lat,lng:o.lng,draggable:o.draggable,image:o.image,onOnLoadKakaoMapMarker:a,onDragEndKakaoMapMarker:i,onDeleteKakaoMapMarker:m},null,8,["id","map","lat","lng","draggable","image"]))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.markerList,(o,k)=>(e.openBlock(),e.createElementBlock("div",{key:k},[k!==d.markerList.length-1?(e.openBlock(),e.createBlock(e.unref(b),{key:0,latLngList:[{lat:d.markerList[k].lat,lng:d.markerList[k].lng},{lat:d.markerList[k+1].lat,lng:d.markerList[k+1].lng}],endArrow:d.endArrow,strokeWeight:d.strokeWeight,strokeColor:d.strokeColor,strokeOpacity:d.strokeOpacity,strokeStyle:d.strokeStyle,zIndex:d.zIndex},null,8,["latLngList","endArrow","strokeWeight","strokeColor","strokeOpacity","strokeStyle","zIndex"])):e.createCommentVNode("",!0)]))),128))])):e.createCommentVNode("",!0),d.markerList&&d.showMarkerOrder?(e.openBlock(),e.createElementBlock("div",S,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.markerList,(o,k)=>(e.openBlock(),e.createBlock(e.unref(v),{key:k,lat:o.lat,lng:o.lng,"y-anchor":0,content:g(o.order!==void 0?o.order:k,o.orderBottomMargin)},null,8,["lat","lng","content"]))),128))])):e.createCommentVNode("",!0),e.renderSlot(l.$slots,"default")],64))}}),$={install:u=>{u.component("KakaoMap",B),u.component("KakaoMapMarker",L),u.component("KakaoMapCustomOverlay",v),u.component("KakaoMapInfoWindow",w),u.component("KakaoMapMarkerPolyline",C),u.component("KakaoMapPolyline",b)}};M.KakaoMap=B,M.KakaoMapCustomOverlay=v,M.KakaoMapInfoWindow=w,M.KakaoMapMarker=L,M.KakaoMapMarkerPolyline=C,M.KakaoMapPolyline=b,M.Vue3KakaoMaps=$,M.isKakaoMapApiLoaded=h,M.useKakao=O,Object.defineProperty(M,Symbol.toStringTag,{value:"Module"})});
